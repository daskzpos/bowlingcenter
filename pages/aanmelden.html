<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aanmelden</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div  
    class="min-h-screen bg-black flex items-center justify-center relative bg-cover bg-center py-8"  
    style="background-image: url('/images/resize_1200_99999.jpg');"  
  >
    
    <!-- Donkere overlay -->
    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
    
    
    <!-- Aanmeld card (scrollbaar) -->
    <div class="relative z-10 bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 w-full max-w-md shadow-2xl my-8 max-h-screen overflow-y-auto">
       <!-- Terug naar overzicht knop -->
      <a 
        href="/pages/home.html" 
        class="inline-flex items-center gap-2 text-gray-300 hover:text-white text-sm mb-6 transition"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Terug naar overzicht
      </a>
      <h1 class="text-white text-4xl font-bold mb-2 text-center">Meld je aan</h1>
      <p class="text-gray-300 text-center mb-6">Maak een account voor Brooklyn Bowl</p>
      
      <!-- Message display -->
      <div id="message" class="hidden mb-4 p-3 rounded-lg text-white text-center"></div>
      

      <!-- Aanmeld formulier -->
      <form id="signupForm" class="space-y-4">
        
        <!-- Voornaam -->
        <div>
          <label class="block text-white text-sm font-semibold mb-1" for="first-name">
            Voornaam
          </label>
          <input 
            type="text" 
            id="first-name"
            name="voornaam"
            class="w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="voornaam"
            required
          >
        </div>

        <!-- Achternaam -->
        <div>
          <label class="block text-white text-sm font-semibold mb-1" for="last-name">
            Achternaam
          </label>
          <input 
            type="text" 
            id="last-name"
            name="achternaam"
            class="w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="achternaam"
            required
          >
        </div>

        <!-- Telefoonnummer -->
        <div>
          <label class="block text-white text-sm font-semibold mb-1" for="phone">
            Telefoonnummer
          </label>
          <input 
            type="tel" 
            id="phone"
            name="telefoonnummer"
            class="w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="06 12345678"
            required
          >
        </div>

        <!-- E-mailadres -->
        <div>
          <label class="block text-white text-sm font-semibold mb-1" for="email">
            E-mailadres
          </label>
          <input 
            type="email" 
            id="email"
            name="email"
            class="w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="henk-jan@gmail.com"
            required
          >
        </div>
        
        <!-- Wachtwoord -->
        <div>
          <label class="block text-white text-sm font-semibold mb-1" for="password">
            Wachtwoord
          </label>
          <input 
            type="password" 
            id="password"
            name="wachtwoord"
            class="w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="••••••••"
            required
          >
        </div>

        <!-- Wachtwoord herhalen -->
        <div>
          <label class="block text-white text-sm font-semibold mb-1" for="password-confirm">
            Herhaal wachtwoord
          </label>
          <input 
            type="password" 
            id="password-confirm"
            name="wachtwoord_confirm"
            class="w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="••••••••"
            required
          >
        </div>
        
        <!-- Aanmelden knop -->
        <button 
          type="submit"
          id="submitBtn"
          class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition shadow-lg mt-6"
        >
          Account aanmaken
        </button>
        
      </form>

   
      
      <script>
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const submitBtn = document.getElementById('submitBtn');
          const messageDiv = document.getElementById('message');
          const voornaam = document.getElementById('first-name').value;
          const achternaam = document.getElementById('last-name').value;
          const telefoonnummer = document.getElementById('phone').value;
          const email = document.getElementById('email').value;
          const wachtwoord = document.getElementById('password').value;
          const wachtwoord_confirm = document.getElementById('password-confirm').value;
          
          // Check if passwords match
          if (wachtwoord !== wachtwoord_confirm) {
            messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-red-600';
            messageDiv.textContent = 'Wachtwoorden komen niet overeen';
            messageDiv.classList.remove('hidden');
            return;
          }
          
          submitBtn.disabled = true;
          submitBtn.textContent = 'Bezig met aanmelden...';
          
          try {
            const response = await fetch('/php/signup.php', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ voornaam, achternaam, telefoonnummer, email, wachtwoord })
            });
            
            // Check if response is ok
            if (!response.ok) {
              throw new Error(`Server error: ${response.status} - ${response.statusText}`);
            }
            
            const contentType = response.headers.get('content-type');
            if (!contentType || !contentType.includes('application/json')) {
              const text = await response.text();
              console.error('Response was not JSON:', text);
              throw new Error('Server returned invalid response. Check console for details.');
            }
            
            const data = await response.json();
            
            if (data.success) {
              messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-green-600';
              messageDiv.textContent = data.message;
              messageDiv.classList.remove('hidden');
              
              // Redirect to login page after 2 seconds
              setTimeout(() => {
                window.location.href = 'login.html';
              }, 2000);
            } else {
              messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-red-600';
              messageDiv.textContent = data.message;
              messageDiv.classList.remove('hidden');
              
              submitBtn.disabled = false;
              submitBtn.textContent = 'Account aanmaken';
            }
          } catch (error) {
            console.error('Signup error:', error);
            messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-red-600';
            messageDiv.textContent = error.message || 'Er is een fout opgetreden. Probeer het opnieuw.';
            messageDiv.classList.remove('hidden');
            
            submitBtn.disabled = false;
            submitBtn.textContent = 'Account aanmaken';
          }
        });
      </script>
      
      <!-- Link terug naar inloggen -->
      <p class="text-gray-300 text-center mt-6">
        Heb je al een account? 
        <a href="login.html" class="text-orange-400 font-semibold hover:text-orange-300 transition">
          Log in
        </a>
      </p>
      
    </div>
    
  </div>

   <!-- Versie informatie -->
  <footer class="text-white text-center text-1xl rounded-md fixed bottom-0 left-0 right-0">Brooklyn Bowl © v1.0.0</footer>
</body>
</html>