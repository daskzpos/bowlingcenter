<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div  
    class="h-screen bg-black flex items-center justify-center relative bg-cover bg-center"  
    style="background-image: url('/Images/resize_1200_99999.jpg');"  
  >
    
    <!-- Donkere overlay voor betere leesbaarheid -->
    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
    
    <!-- Login card -->
    <div class="relative z-10 bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 w-full max-w-md shadow-2xl">
      
      <!-- Terug naar overzicht knop -->
      <a 
        href="/pages/home.html" 
        class="inline-flex items-center gap-2 text-gray-300 hover:text-white text-sm mb-6 transition"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Terug naar overzicht
      </a>
      
      <h1 class="text-white text-4xl font-bold mb-2 text-center">Welkom terug</h1>
      <p class="text-gray-300 text-center mb-8">Log in bij Brooklyn Bowl</p>
      
      <!-- Message display -->
      <div id="message" class="hidden mb-4 p-3 rounded-lg text-white text-center"></div>
      
      <!-- Login form -->
      <form id="loginForm" class="space-y-6">
        
        <!-- Email input -->
        <div>
          <label class="block text-white text-sm font-semibold mb-2" for="email">
            E-mailadres
          </label>
          <input 
            type="email" 
            id="email"
            name="email"
            class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="henk-jan@email.com"
            required
          >
        </div>
        
        <!-- Password input -->
        <div>
          <label class="block text-white text-sm font-semibold mb-2" for="password">
            Wachtwoord
          </label>
          <input 
            type="password" 
            id="password"
            name="wachtwoord"
            class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-gray-300 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"
            placeholder="••••••••"
            required
          >
        </div>
        
        
        <!-- Login button -->
        <button 
          type="submit"
          id="submitBtn"
          class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition shadow-lg"
        >
          Inloggen
        </button>
        
      </form>
      
      <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const submitBtn = document.getElementById('submitBtn');
          const messageDiv = document.getElementById('message');
          const email = document.getElementById('email').value;
          const wachtwoord = document.getElementById('password').value;
          
          submitBtn.disabled = true;
          submitBtn.textContent = 'Bezig met inloggen...';
          
          try {
            const response = await fetch('/php/login.php', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ email, wachtwoord })
            });
            
            // Check if response is ok
            if (!response.ok) {
              throw new Error(`Server error: ${response.status} - ${response.statusText}`);
            }
            
            const contentType = response.headers.get('content-type');
            if (!contentType || !contentType.includes('application/json')) {
              const text = await response.text();
              console.error('Response was not JSON:', text);
              throw new Error('Server returned invalid response. Check console for details.');
            }
            
            const data = await response.json();
            
            if (data.success) {
              messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-green-600';
              messageDiv.textContent = data.message;
              messageDiv.classList.remove('hidden');
              
              // Redirect after 1 second
              setTimeout(() => {
                window.location.href = data.redirect;
              }, 1000);
            } else {
              messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-red-600';
              messageDiv.textContent = data.message;
              messageDiv.classList.remove('hidden');
              
              submitBtn.disabled = false;
              submitBtn.textContent = 'Inloggen';
            }
          } catch (error) {
            console.error('Login error:', error);
            messageDiv.className = 'mb-4 p-3 rounded-lg text-white text-center bg-red-600';
            messageDiv.textContent = error.message || 'Er is een fout opgetreden. Probeer het opnieuw.';
            messageDiv.classList.remove('hidden');
            
            submitBtn.disabled = false;
            submitBtn.textContent = 'Inloggen';
          }
        });
      </script>
      
      <!-- Aanmelden link -->
      <p class="text-gray-300 text-center mt-6">
        Nog geen account? 
        <a href="aanmelden.html" class="text-orange-400 font-semibold hover:text-orange-300 transition">
          Meld je aan
        </a>
      </p>
      
    </div>
    
  </div>
</body>
</html>